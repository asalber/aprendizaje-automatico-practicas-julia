<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Árboles de decisión – Prácticas de Aprendizaje Automático con Julia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-redes-neuronales-prealimentadas.html" rel="next">
<link href="./03-regresion.html" rel="prev">
<link href="./img/logos/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-d640c705e8c17715bca3574aa719063f.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-d6a2ae2cb249da1580f0a11f71b8f854.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8e998d45b64ddb7b0ac7840f32512d9a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-01685da6d728d7410bd3e00e53d62d40.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No se han encontrado resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="4&nbsp; Árboles de decisión – Prácticas de Aprendizaje Automático con Julia">
<meta property="og:description" content="">
<meta property="og:image" content="07-arboles-decision_files/figure-html/cell-3-output-2.svg">
<meta property="og:site_name" content="Prácticas de Aprendizaje Automático con Julia">
<meta name="twitter:title" content="4&nbsp; Árboles de decisión – Prácticas de Aprendizaje Automático con Julia">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="07-arboles-decision_files/figure-html/cell-3-output-2.svg">
<meta name="twitter:site" content="@aprendeconalf">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const darkModeDefault = authorPrefersDark;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./07-arboles-decision.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Árboles de decisión</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./img/logos/aprendeconalf.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./img/logos/aprendeconalf.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Prácticas de Aprendizaje Automático con Julia</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://aprendeconalf.es" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./practicas-aprendizaje-automatico-julia.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./practicas-aprendizaje-automatico-julia.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo oscuro"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduccion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-preprocesamiento.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preprocesamiento de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-regresion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Regresión</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-arboles-decision.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Árboles de decisión</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-redes-neuronales-prealimentadas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Redes de neuronas artificiales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-redes-neuronales-recurrentes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Redes de neuronas artificiales recurrentes</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#ejercicios-resueltos" id="toc-ejercicios-resueltos" class="nav-link active" data-scroll-target="#ejercicios-resueltos"><span class="header-section-number">4.1</span> Ejercicios Resueltos</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Árboles de decisión</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Los árboles de decisión son modelos de aprendizaje simples e intuitivos que pueden utilizarse para tanto para predecir variables cuantitativas (regresión) como categóricas (clasificación). Esta práctica contiene ejercicios que muestran como construir modelos de aprendizaje basados en árboles de decisión con Julia.</p>
<section id="ejercicios-resueltos" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="ejercicios-resueltos"><span class="header-section-number">4.1</span> Ejercicios Resueltos</h2>
<p>Para la realización de esta práctica se requieren los siguientes paquetes:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span>  <span class="co"># Para la lectura de archivos CSV.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span>  <span class="co"># Para el manejo de datos tabulares.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Tidier</span> <span class="co"># Para el preprocesamiento de datos.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">PrettyTables</span>  <span class="co"># Para mostrar tablas formateadas.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLMakie</span>  <span class="co"># Para obtener gráficos interactivos.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">AlgebraOfGraphics</span> <span class="co"># Para generar gráficos mediante la gramática de gráficos.</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DecisionTree</span> <span class="co"># Para construir árboles de decisión.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GraphMakie</span> <span class="co"># Para la visualización de árboles de decisión.</span></span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div id="exr-arboles-decision-1" class="theorem exercise">
<p><span class="theorem-title"><strong>Ejercicio 4.1</strong></span> El conjunto de datos <a href="./datos/tenis.csv"><code>tenis.csv</code></a> contiene información sobre las condiciones meteorológicas de varios días y si se pudo jugar al tenis o no.</p>
<ol type="a">
<li><p>Cargar los datos del archivo <a href="https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/tenis.csv"><code>tenis.csv</code></a> en un data frame.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="156eb399" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span>, <span class="bu">DataFrames</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="fu">download</span>(<span class="st">"https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/tenis.csv"</span>), DataFrame)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div><div style="float: left;"><span>14×5 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cielo</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Temperatura</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Humedad</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Viento</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Tenis</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String7">String7</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String7">String7</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String3">String3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">Soleado</td>
<td style="text-align: left;">Caluroso</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">Soleado</td>
<td style="text-align: left;">Caluroso</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">Nublado</td>
<td style="text-align: left;">Caluroso</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">Lluvioso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">Lluvioso</td>
<td style="text-align: left;">Frío</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">Lluvioso</td>
<td style="text-align: left;">Frío</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">Nublado</td>
<td style="text-align: left;">Frío</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">Soleado</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">Soleado</td>
<td style="text-align: left;">Frío</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">Lluvioso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">Soleado</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">Nublado</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">Nublado</td>
<td style="text-align: left;">Caluroso</td>
<td style="text-align: left;">Normal</td>
<td style="text-align: left;">Suave</td>
<td style="text-align: left;">Sí</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">14</td>
<td style="text-align: left;">Lluvioso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Alta</td>
<td style="text-align: left;">Fuerte</td>
<td style="text-align: left;">No</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Crear un diagrama de barras que muestre la distribución de frecuencias de cada variable meteorológica según si se pudo jugar al tenis o no. ¿Qué variable meteorológica parece tener más influencia en la decisión de jugar al tenis?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="73bd19ee" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLMakie</span>, <span class="bu">AlgebraOfGraphics</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">frecuencias</span>(df<span class="op">::</span><span class="dt">DataFrame</span>, var<span class="op">::</span><span class="dt">Symbol</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el número de días de cada clase que se juega al tenis.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    frec <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(df, [var, <span class="op">:</span>Tenis]), nrow <span class="op">=&gt;</span> <span class="op">:</span>Días)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dibujamos el diagrama de barras.</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    plt <span class="op">=</span> <span class="fu">data</span>(frec) <span class="op">*</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mapping</span>(var, <span class="op">:</span>Días, stack <span class="op">=</span> <span class="op">:</span>Tenis, color <span class="op">=</span> <span class="op">:</span>Tenis, ) <span class="op">*</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">visual</span>(BarPlot) </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Devolvemos el gráfico.</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> plt</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> <span class="fu">Figure</span>()</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">draw!</span>(fig[<span class="fl">1</span>, <span class="fl">1</span>], <span class="fu">frecuencias</span>(df, <span class="op">:</span>Cielo))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="fu">draw!</span>(fig[<span class="fl">1</span>, <span class="fl">2</span>], <span class="fu">frecuencias</span>(df, <span class="op">:</span>Temperatura))</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">draw!</span>(fig[<span class="fl">1</span>, <span class="fl">3</span>], <span class="fu">frecuencias</span>(df, <span class="op">:</span>Humedad))</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">draw!</span>(fig[<span class="fl">1</span>, <span class="fl">4</span>], <span class="fu">frecuencias</span>(df, <span class="op">:</span>Viento))</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-3-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>A la vista de las frecuencias de cada variable, las variable <code>Cielo</code> y <code>Humedad</code> parecen ser las que más influye en la decisión de jugar al tenis.</p>
</div>
</div>
</div></li>
<li><p>Calcular la impureza del conjunto de datos utilizando el índice de Gini. ¿Qué variable meteorológica parece tener más influencia en la decisión de jugar al tenis?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>El <a href="https://en.wikipedia.org/wiki/Decision_tree_learning#Gini_impurity">índice de Gini</a> se calcula mediante la fórmula</p>
<p><span class="math display">\[ GI = 1 - \sum_{i=1}^{n} p_i^2 \]</span></p>
<p>donde <span class="math inline">\(p_i\)</span> es la proporción de cada clase en el conjunto de datos y <span class="math inline">\(n\)</span> es el número de clases.</p>
<p>El índice de Gini toma valores entre <span class="math inline">\(0\)</span> y <span class="math inline">\(1-\frac{1}{n}\)</span> (<span class="math inline">\(0.5\)</span> en el caso de clasificación binaria), donde <span class="math inline">\(0\)</span> indica que todas las instancias pertenecen a una sola clase (mínima impureza) y <span class="math inline">\(1-\frac{1}{n}\)</span> indica que las instancias están distribuidas uniformemente entre todas las clases (máxima impureza).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="aae786eb" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">gini</span>(df<span class="op">::</span><span class="dt">DataFrame</span>, var<span class="op">::</span><span class="dt">Symbol</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el número de ejemplos.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">nrow</span>(df)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos las frecuencias absolutas de cada clase.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    frec <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(df, var), nrow <span class="op">=&gt;</span> <span class="op">:</span>ni)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos la proporción de cada clase.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    frec.p <span class="op">=</span> frec.ni <span class="op">./</span> n</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el índice de Gini.</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    gini <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">sum</span>(frec.p <span class="op">.^</span> <span class="fl">2</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gini</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>g0 <span class="op">=</span> <span class="fu">gini</span>(df, <span class="op">:</span>Tenis)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>0.4591836734693877</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>¿Qué reducción del índice Gini se obtiene si dividimos el conjunto de ejemplos según la variable <code>Humedad</code>? ¿Y si dividimos el conjunto con respecto a la variable <code>Viento</code>?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>La reducción del índice de Gini se calcula como la diferencia entre el índice de Gini del conjunto original y el índice de Gini del conjunto dividido.</p>
<p><span class="math display">\[ \Delta GI = GI_{original} - GI_{dividido} \]</span></p>
<p>donde el índice de Gini del conjunto dividido es la media ponderada de los índices de Gini de los subconjuntos resultantes de la división.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Calculamos primero la reducción del índice de Gini al dividir el conjunto de ejemplos según la variable <code>Humedad</code>.</p>
<div id="77879123" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Tidier</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividimos el conjunto de ejemplos según la variable Humedad.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>df_humedad_alta <span class="op">=</span> <span class="pp">@filter</span>(df, Humedad <span class="op">==</span> <span class="st">"Alta"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df_humedad_normal <span class="op">=</span> <span class="pp">@filter</span>(df, Humedad <span class="op">==</span> <span class="st">"Normal"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos los tamaños de los subconjuntos de ejemplos.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fu">nrow</span>(df_humedad_alta), <span class="fu">nrow</span>(df_humedad_normal)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos el índice de Gini de cada subconjunto.</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>gis <span class="op">=</span> <span class="fu">gini</span>(df_humedad_alta, <span class="op">:</span>Tenis), <span class="fu">gini</span>(df_humedad_normal, <span class="op">:</span>Tenis)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos media ponderada de los índices de Gini de los subconjuntos </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>g_humedad <span class="op">=</span> <span class="fu">sum</span>(gis <span class="op">.*</span> n) <span class="op">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la reducción del índice de Gini.</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>g0 <span class="op">-</span> g_humedad</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>0.09183673469387743</code></pre>
</div>
</div>
<p>Calculamos ahora la reducción del índice de Gini al dividir el conjunto de ejemplos según la variable <code>Viento</code>.</p>
<div id="b3d8ddcc" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividimos el conjunto de ejemplos según la variable `Viento`</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_viento_fuerte <span class="op">=</span> <span class="pp">@filter</span>(df, Viento <span class="op">==</span> <span class="st">"Fuerte"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>df_viento_suave <span class="op">=</span> <span class="pp">@filter</span>(df, Viento <span class="op">==</span> <span class="st">"Suave"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos los tamaños de los subconjuntos de ejemplos</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fu">nrow</span>(df_viento_fuerte), <span class="fu">nrow</span>(df_viento_suave)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos el índice de Gini de cada subconjunto</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>gis <span class="op">=</span> <span class="fu">gini</span>(df_viento_fuerte, <span class="op">:</span>Tenis), <span class="fu">gini</span>(df_viento_suave, <span class="op">:</span>Tenis)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos media ponderada de los índices de Gini de los subconjuntos</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>g_viento <span class="op">=</span> <span class="fu">sum</span>(gis <span class="op">.*</span> n) <span class="op">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la reducción del índice de Gini</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>g0 <span class="op">-</span> g_viento</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>0.030612244897959162</code></pre>
</div>
</div>
<p>Como se puede observar, la reducción del índice de Gini al dividir el conjunto de ejemplos según la variable <code>Humedad</code> es mayor que la reducción del índice de Gini al dividir el conjunto con respecto a la variable <code>Viento</code>. Por lo tanto, la variable <code>Humedad</code> parece tener más influencia en la decisión de jugar al tenis y sería la variable que se debería elegir para dividir el conjunto de ejemplos.</p>
</div>
</div>
</div></li>
<li><p>Construir un árbol de decisión que explique si se puede jugar al tenis en función de las variables meteorológicas.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <code>DecisionTreeClassifier</code> del paquete <a href="https://docs.juliahub.com/DecisionTree/"><code>DecisionTree.jl</code></a>.</p>
<p>Los parámetros más importantes de esta función son:</p>
<ul>
<li><code>max_depth</code>: Profundidad máxima del árbol. Si no se indica, el árbol crecerá hasta que todas las hojas sean puras o hasta que todas las hojas contengan menos de <code>min_samples_split</code> ejemplos.</li>
<li><code>min_samples_leaf</code>: Número mínimo de ejemplos en una hoja (1 por defecto).</li>
<li><code>min_samples_split</code>: Número mínimo de ejemplos para dividir un nodo (2 por defecto).</li>
<li><code>min_impurity_decrease</code>: Reducción mínima de la impureza para dividir un nodo (0 por defecto).</li>
<li><code>post-prune</code>: Si se indica <code>true</code>, se poda el árbol después de que se ha construido. La poda reduce el tamaño del árbol eliminando nodos que no aportan información útil.</li>
<li><code>merge_purity_threshold</code>: Umbral de pureza para fusionar nodos. Si se indica, se fusionan los nodos que tienen una pureza menor que este umbral.</li>
<li><code>feature_importance</code>: Indica la medida para calcular la importancia de las variables a la hora de dividir el conjunto de datos. Puede ser <code>:impurity</code> o <code>:split</code>. Si no se indica, se utiliza la impureza de Gini.</li>
<li><code>rng</code>: Indica la semilla para la generación de números aleatorios. Si no se indica, se utiliza el generador de números aleatorios por defecto.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="9c62efd0" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DecisionTree</span>, <span class="bu">CategoricalArrays</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables predictoras.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> <span class="fu">Matrix</span>(<span class="fu">select</span>(df, <span class="fu">Not</span>(<span class="op">:</span>Tenis)))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable objetivo.</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df.Tenis</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir las variables categóricas a enteros.</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> <span class="fu">hcat</span>([<span class="fu">levelcode</span>.(<span class="fu">categorical</span>(X[<span class="op">:</span>, j])) for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">size</span>(X, <span class="fl">2</span>)]<span class="op">...</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir la variable objetivo a enteros.</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="fu">levelcode</span>.(<span class="fu">categorical</span>(y))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> <span class="fu">DecisionTreeClassifier</span>(max_depth<span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">fit!</span>(tree, X, y)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>DecisionTreeClassifier
max_depth:                3
min_samples_leaf:         1
min_samples_split:        2
min_purity_increase:      0.0
pruning_purity_threshold: 1.0
n_subfeatures:            0
classes:                  [1, 2]
root:                     Decision Tree
Leaves: 6
Depth:  3</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Visualizar el árbol de decisión construido.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <code>plot_tree</code> del paquete <a href="https://docs.juliahub.com/DecisionTree/"><code>DecisionTree.jl</code></a>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="76a8e124" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_tree</span>(tree, feature_names<span class="op">=</span><span class="fu">names</span>(df)[<span class="fl">1</span><span class="op">:</span><span class="kw">end</span><span class="op">-</span><span class="fl">1</span>])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Feature 3: "Humedad" &lt; 2.0 ?
├─ Feature 1: "Cielo" &lt; 3.0 ?
    ├─ Feature 4: "Viento" &lt; 2.0 ?
        ├─ 2 : 1/2
        └─ 2 : 2/2
    └─ 1 : 3/3
└─ Feature 1: "Cielo" &lt; 2.0 ?
    ├─ Feature 4: "Viento" &lt; 2.0 ?
        ├─ 1 : 1/1
        └─ 2 : 2/2
    └─ 2 : 4/4</code></pre>
</div>
</div>
</div>
</div>
</div></li>
</ol>
</div>
<div id="exr-arboles-decision-2" class="theorem exercise">
<p><span class="theorem-title"><strong>Ejercicio 4.2</strong></span> El conjunto de datos <a href="datos/pingüinos.csv">pingüinos.csv</a> contiene un conjunto de datos sobre tres especies de pingüinos con las siguientes variables:</p>
<ul>
<li>Especie: Especie de pingüino, comúnmente Adelie, Chinstrap o Gentoo.</li>
<li>Isla: Isla del archipiélago Palmer donde se realizó la observación.</li>
<li>Longitud_pico: Longitud del pico en mm.</li>
<li>Profundidad_pico: Profundidad del pico en mm</li>
<li>Longitud_ala: Longitud de la aleta en mm.</li>
<li>Peso: Masa corporal en gramos.</li>
<li>Sexo: Sexo</li>
</ul>
<ol type="a">
<li><p>Cargar los datos del archivo <a href="https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/pingüinos.csv"><code>pinguïnos.csv</code></a> en un data frame.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="7c073b3e" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span>, <span class="bu">DataFrames</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="fu">download</span>(<span class="st">"https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/pingüinos.csv"</span>), DataFrame, missingstring<span class="op">=</span><span class="st">"NA"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div><div style="float: left;"><span>344×7 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">319 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Especie</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Isla</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Profundidad_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_ala</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Peso</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sexo</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Union{Missing, Float64}">Float64?</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Union{Missing, Float64}">Float64?</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Union{Missing, Int64}">Int64?</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Union{Missing, String7}">String7?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.1</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3750</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">17.4</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right; font-style: italic;">missing</td>
<td style="text-align: right; font-style: italic;">missing</td>
<td style="text-align: right; font-style: italic;">missing</td>
<td style="text-align: right; font-style: italic;">missing</td>
<td style="text-align: left; font-style: italic;">missing</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">36.7</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3450</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">20.6</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.9</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3625</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.2</td>
<td style="text-align: right;">19.6</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">4675</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3475</td>
<td style="text-align: left; font-style: italic;">missing</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">42.0</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">4250</td>
<td style="text-align: left; font-style: italic;">missing</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">37.8</td>
<td style="text-align: right;">17.1</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">3300</td>
<td style="text-align: left; font-style: italic;">missing</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">37.8</td>
<td style="text-align: right;">17.3</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">3700</td>
<td style="text-align: left; font-style: italic;">missing</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">41.1</td>
<td style="text-align: right;">17.6</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">3200</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">333</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">16.6</td>
<td style="text-align: right;">191</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">334</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">49.3</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">203</td>
<td style="text-align: right;">4050</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">335</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">18.8</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">336</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.6</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">194</td>
<td style="text-align: right;">3525</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">337</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">51.9</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">206</td>
<td style="text-align: right;">3950</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">338</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">189</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">339</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.7</td>
<td style="text-align: right;">17.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">340</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">55.8</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">207</td>
<td style="text-align: right;">4000</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">341</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">43.5</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">3400</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">342</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">49.6</td>
<td style="text-align: right;">18.2</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3775</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">343</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">19.0</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">4100</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">344</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">3775</td>
<td style="text-align: left;">hembra</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Hacer un análisis de los datos perdidos en el data frame.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="0df89ef3" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(df, <span class="op">:</span>nmissing)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<div><div style="float: left;"><span>7×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nmissing</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Symbol">Symbol</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">Especie</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">Isla</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">Longitud_pico</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">Profundidad_pico</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">Longitud_ala</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">Peso</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">Sexo</td>
<td style="text-align: right;">11</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Eliminar del data frame los casos con valores perdidos.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="78e7cc5e" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dropmissing!</span>(df)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<div><div style="float: left;"><span>333×7 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">308 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Especie</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Isla</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Profundidad_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_ala</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Peso</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sexo</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String7">String7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.1</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3750</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">17.4</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">36.7</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3450</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">20.6</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.9</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3625</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.2</td>
<td style="text-align: right;">19.6</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">4675</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">41.1</td>
<td style="text-align: right;">17.6</td>
<td style="text-align: right;">182</td>
<td style="text-align: right;">3200</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.6</td>
<td style="text-align: right;">21.2</td>
<td style="text-align: right;">191</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">34.6</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">4400</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">36.6</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">3700</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">19.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3450</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">42.5</td>
<td style="text-align: right;">20.7</td>
<td style="text-align: right;">197</td>
<td style="text-align: right;">4500</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">322</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">16.6</td>
<td style="text-align: right;">191</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">323</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">49.3</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">203</td>
<td style="text-align: right;">4050</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">324</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">18.8</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">325</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.6</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">194</td>
<td style="text-align: right;">3525</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">326</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">51.9</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">206</td>
<td style="text-align: right;">3950</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">327</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">189</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">328</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">45.7</td>
<td style="text-align: right;">17.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">329</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">55.8</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">207</td>
<td style="text-align: right;">4000</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">330</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">43.5</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">3400</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">331</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">49.6</td>
<td style="text-align: right;">18.2</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3775</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">332</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">19.0</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">4100</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">333</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.2</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">3775</td>
<td style="text-align: left;">hembra</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Crear diagramas que muestren la distribución de frecuencias de cada variable según la especie de pingüino. ¿Qué variable parece tener más influencia en la especie de pingüino?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Para las variables cualitativas dibujamos diagramas de barras.</p>
<div id="390e8e2d" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLMakie</span>, <span class="bu">AlgebraOfGraphics</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>frec_isla <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(df, [<span class="op">:</span>Isla, <span class="op">:</span>Especie]), nrow <span class="op">=&gt;</span> <span class="op">:</span>Frecuencia)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(frec_isla) <span class="op">*</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mapping</span>(<span class="op">:</span>Isla, <span class="op">:</span>Frecuencia, stack <span class="op">=</span> <span class="op">:</span>Especie, color <span class="op">=:</span>Especie) <span class="op">*</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">visual</span>(BarPlot) <span class="op">|&gt;</span> draw</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-12-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="82d2275d" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>frec_sexo <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(df, [<span class="op">:</span>Sexo, <span class="op">:</span>Especie]), nrow <span class="op">=&gt;</span> <span class="op">:</span>Frecuencia)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(frec_sexo) <span class="op">*</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mapping</span>(<span class="op">:</span>Sexo, <span class="op">:</span>Frecuencia, stack <span class="op">=</span> <span class="op">:</span>Especie, color <span class="op">=:</span>Especie) <span class="op">*</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">visual</span>(BarPlot) <span class="op">|&gt;</span> draw</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-13-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Para las variables cuantitativas dibujamos diagramas de cajas.</p>
<div id="8a88eaac" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">cajas</span>(df, var, clase)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data</span>(df) <span class="op">*</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mapping</span>(clase, var, color <span class="op">=</span> clase) <span class="op">*</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">visual</span>(BoxPlot) <span class="op">|&gt;</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        draw</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cajas</span>(df, <span class="op">:</span>Longitud_pico, <span class="op">:</span>Especie)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="55">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-14-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="f5c33ea1" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cajas</span>(df, <span class="op">:</span>Profundidad_pico, <span class="op">:</span>Especie)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="56">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-15-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="ac079236" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cajas</span>(df, <span class="op">:</span>Longitud_ala, <span class="op">:</span>Especie)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-16-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="bea3106c" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cajas</span>(df, <span class="op">:</span>Peso, <span class="op">:</span>Especie)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-17-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>¿Cuál es la reducción de la impureza del conjunto de datos si dividimos el conjunto de datos en dos conjuntos según si la longitud del pico es mayor o menor que 44 mm?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="ec4589d8" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Tidier</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">gini</span>(df<span class="op">::</span><span class="dt">DataFrame</span>, var<span class="op">::</span><span class="dt">Symbol</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">nrow</span>(df)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    frec <span class="op">=</span> <span class="fu">combine</span>(<span class="fu">groupby</span>(df, var), nrow <span class="op">=&gt;</span> <span class="op">:</span>ni)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    frec.p <span class="op">=</span> frec.ni <span class="op">./</span> n</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    gini <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">sum</span>(frec.p <span class="op">.^</span> <span class="fl">2</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gini</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">reduccion_impureza</span>(df<span class="op">::</span><span class="dt">DataFrame</span>, var<span class="op">::</span><span class="dt">Symbol</span>, val<span class="op">::</span><span class="dt">Number</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dividimos el conjunto de ejemplos según la longitud del pico es menor de 44.</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    df_menor <span class="op">=</span> <span class="pp">@eval</span> <span class="pp">@filter</span>(<span class="op">$</span>df, <span class="op">$</span>var <span class="op">&lt;=</span> <span class="op">$</span>val)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    df_mayor <span class="op">=</span> <span class="pp">@eval</span> <span class="pp">@filter</span>(<span class="op">$</span>df, <span class="op">$</span>var <span class="op">&gt;</span> <span class="op">$</span>val)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos los tamaños de los subconjuntos de ejemplos.</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">nrow</span>(df_menor), <span class="fu">nrow</span>(df_mayor)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos el índice de Gini de cada subconjunto.</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    gis <span class="op">=</span> <span class="fu">gini</span>(df_menor, <span class="op">:</span>Especie), <span class="fu">gini</span>(df_mayor, <span class="op">:</span>Especie)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos media ponderada de los índices de Gini de los subconjuntos.</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    g1 <span class="op">=</span> <span class="fu">sum</span>(gis <span class="op">.*</span> n) <span class="op">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculamos la reducción del índice de Gini.</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gini</span>(df, <span class="op">:</span>Especie) <span class="op">-</span> g1</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="fu">reduccion_impureza</span>(df, <span class="op">:</span>Longitud_pico, <span class="fl">44</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>0.26577182779353914</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Determinar el valor óptimo de división del conjunto de datos según la longitud del pico. Para ello, calcular la reducción de la impureza para cada valor de longitud del pico y dibujar el resultado.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Dibujamos la reducción de la impureza en función de la longitud del pico.</p>
<div id="2278f450" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores únicos de longitud del pico.</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>valores <span class="op">=</span> <span class="fu">unique</span>(df.Longitud_pico)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reducción de la impureza para cada valor.</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>reducciones <span class="op">=</span> [<span class="fu">reduccion_impureza</span>(df, <span class="op">:</span>Longitud_pico, val) for val <span class="kw">in</span> valores]</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficamos el resultado.</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLMakie</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> <span class="fu">Figure</span>()</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> <span class="fu">Axis</span>(fig[<span class="fl">1</span>, <span class="fl">1</span>], title <span class="op">=</span> <span class="st">"Reducción de la impureza según la longitud del pico"</span>, xlabel <span class="op">=</span> <span class="st">"Longitud del pico"</span>, ylabel <span class="op">=</span> <span class="st">"Reducción de la impureza"</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="fu">scatter!</span>(ax, valores, reducciones)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>Scatter{Tuple{Vector{Point{2, Float64}}}}</code></pre>
</div>
</div>
<p>Y ahora obtenemos el valor óptimo de división del conjunto de datos según la longitud del pico.</p>
<div id="095250fd" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>val_optimo <span class="op">=</span> valores[<span class="fu">argmax</span>(reducciones)]</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>42.3</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Dividir aleatoriamente el dataframe en un conjunto de entrenamiento y un conjunto de test con proporciones <span class="math inline">\(3/4\)</span> y <span class="math inline">\(1/4\)</span> respectivamente.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilizar la función <a href="https://docs.julialang.org/en/v1/stdlib/Random/#Random.shuffle"><code>shuffle</code></a> del paquete <a href="https://docs.julialang.org/en/v1/stdlib/Random/"><code>Random</code></a> para barajar el dataframe y luego dividirlo en dos subconjuntos.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="150755e9" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecemos la semilla para la reproducibilidad.</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">1234</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Barajamos el dataframe.</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> <span class="fu">shuffle</span>(df)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividimos el dataframe en un conjunto de entrenamiento y un conjunto de test.</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fu">nrow</span>(df)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>df_test <span class="op">=</span> df[<span class="fl">1</span><span class="op">:</span><span class="fu">div</span>(n, <span class="fl">4</span>), <span class="op">:</span>]</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>df_train <span class="op">=</span> df[<span class="fu">div</span>(n, <span class="fl">4</span>)<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span>, <span class="op">:</span>]</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<div><div style="float: left;"><span>250×7 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">225 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Especie</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Isla</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Profundidad_pico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Longitud_ala</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Peso</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sexo</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String15">String15</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String7">String7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">39.0</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">185</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">52.8</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">205</td>
<td style="text-align: right;">4550</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">55.8</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">207</td>
<td style="text-align: right;">4000</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">35.1</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">4200</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">34.6</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">4400</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">50.0</td>
<td style="text-align: right;">15.2</td>
<td style="text-align: right;">218</td>
<td style="text-align: right;">5700</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.6</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">43.5</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">3400</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">36.9</td>
<td style="text-align: right;">18.6</td>
<td style="text-align: right;">189</td>
<td style="text-align: right;">3500</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">36.6</td>
<td style="text-align: right;">18.4</td>
<td style="text-align: right;">184</td>
<td style="text-align: right;">3475</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">46.6</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">17.3</td>
<td style="text-align: right;">228</td>
<td style="text-align: right;">5600</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">52.2</td>
<td style="text-align: right;">18.8</td>
<td style="text-align: right;">197</td>
<td style="text-align: right;">3450</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">239</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">39.8</td>
<td style="text-align: right;">19.1</td>
<td style="text-align: right;">184</td>
<td style="text-align: right;">4650</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">240</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">43.1</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">197</td>
<td style="text-align: right;">3500</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">241</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">49.8</td>
<td style="text-align: right;">17.3</td>
<td style="text-align: right;">198</td>
<td style="text-align: right;">3675</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">242</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">49.8</td>
<td style="text-align: right;">15.9</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">5950</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">243</td>
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">18.5</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">4450</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">244</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">50.7</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">223</td>
<td style="text-align: right;">5550</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">245</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">46.2</td>
<td style="text-align: right;">14.1</td>
<td style="text-align: right;">217</td>
<td style="text-align: right;">4375</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">246</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">35.5</td>
<td style="text-align: right;">17.5</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">3700</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">247</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">39.7</td>
<td style="text-align: right;">18.9</td>
<td style="text-align: right;">184</td>
<td style="text-align: right;">3550</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">248</td>
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">47.7</td>
<td style="text-align: right;">15.0</td>
<td style="text-align: right;">216</td>
<td style="text-align: right;">4750</td>
<td style="text-align: left;">hembra</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">249</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">42.9</td>
<td style="text-align: right;">17.6</td>
<td style="text-align: right;">196</td>
<td style="text-align: right;">4700</td>
<td style="text-align: left;">macho</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">250</td>
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">40.8</td>
<td style="text-align: right;">18.9</td>
<td style="text-align: right;">208</td>
<td style="text-align: right;">4300</td>
<td style="text-align: left;">macho</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Construir un árbol de decisión con el conjunto de entrenamiento sin tener en cuenta la variable <code>Isla</code> y visualizarlo.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="97e94007" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DecisionTree</span>, <span class="bu">CategoricalArrays</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables predictivas.</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> <span class="fu">Matrix</span>(<span class="fu">select</span>(df_train, <span class="fu">Not</span>(<span class="op">:</span>Isla, <span class="op">:</span>Especie)))</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable objetivo.</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> df_train.Especie</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir las variables categóricas a enteros.</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> <span class="fu">hcat</span>([<span class="fu">levelcode</span>.(<span class="fu">categorical</span>(X_train[<span class="op">:</span>, j])) for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">size</span>(X_train, <span class="fl">2</span>)]<span class="op">...</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir la variable objetivo a enteros</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> <span class="fu">levelcode</span>.(<span class="fu">categorical</span>(y_train))</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Construimos el árbol de decisión con profundidad máxima 3.</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> <span class="fu">DecisionTreeClassifier</span>(max_depth <span class="op">=</span> <span class="fl">3</span>)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="fu">fit!</span>(tree, X_train, y_train)</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print_tree</span>(tree, feature_names<span class="op">=</span><span class="fu">names</span>(df)[<span class="fl">3</span><span class="op">:</span><span class="kw">end</span>])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Feature 3: "Longitud_ala" &lt; 29.0 ?
├─ Feature 1: "Longitud_pico" &lt; 62.0 ?
    ├─ 1 : 96/96
    └─ Feature 1: "Longitud_pico" &lt; 87.0 ?
        ├─ 2 : 10/20
        └─ 2 : 37/38
└─ Feature 2: "Profundidad_pico" &lt; 46.0 ?
    ├─ 3 : 90/90
    └─ Feature 1: "Longitud_pico" &lt; 109.0 ?
        ├─ 1 : 2/2
        └─ 2 : 4/4</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Predecir la especie de los pingüinos del conjunto de test y calcular la matriz de confusión de las predicciones.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Utilizar la función <a href="https://juliaai.github.io/StatisticalMeasures.jl/stable/confusion_matrices/#StatisticalMeasures.ConfusionMatrices.confmat"><code>confmat</code></a> del paquete <a href="https://juliaai.github.io/StatisticalMeasures.jl"><code>StatisticalMeaures</code></a> para barajar el dataframe y luego dividirlo en dos subconjuntos.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="a0573119" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatisticalMeasures</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables predictivas</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> <span class="fu">Matrix</span>(<span class="fu">select</span>(df_test, <span class="fu">Not</span>(<span class="op">:</span>Isla, <span class="op">:</span>Especie)))</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable objetivo</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> df_test.Especie</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir las variables categóricas a enteros</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>X_test <span class="op">=</span> <span class="fu">hcat</span>([<span class="fu">levelcode</span>.(<span class="fu">categorical</span>(X_test[<span class="op">:</span>, j])) for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">size</span>(X_test, <span class="fl">2</span>)]<span class="op">...</span>)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir la variable objetivo a enteros</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> <span class="fu">levelcode</span>.(<span class="fu">categorical</span>(y_test))</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Predecimos la especie de pingüino del conjunto de test</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> <span class="fu">predict</span>(tree, X_test)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la precisión del modelo</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="fu">confmat</span>(y_pred, y_test)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>          ┌──────────────┐
          │ Ground Truth │
┌─────────┼────┬────┬────┤
│Predicted│ 1  │ 2  │ 3  │
├─────────┼────┼────┼────┤
│    1    │ 38 │ 11 │ 9  │
├─────────┼────┼────┼────┤
│    2    │ 0  │ 6  │ 0  │
├─────────┼────┼────┼────┤
│    3    │ 0  │ 0  │ 19 │
└─────────┴────┴────┴────┘</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Calcular la precisión del modelo.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>La precisión es la proporción de predicciones correctas sobre el total de predicciones.</p>
<p>Utilizar la función <a href="https://juliaai.github.io/StatisticalMeasures.jl/stable/auto_generated_list_of_measures/#StatisticalMeasures.Accuracy"><code>accuracy</code></a> del paquete <a href="https://juliaai.github.io/StatisticalMeasures.jl"><code>StatisticalMeaures</code></a> para calcular la precisión del modelo.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="b8830c4e" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la precisión del modelo</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(y_pred, y_test)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>0.7590361445783133</code></pre>
</div>
</div>
</div>
</div>
</div></li>
</ol>
</div>
<div id="exr-arboles-decision-3" class="theorem exercise">
<p><span class="theorem-title"><strong>Ejercicio 4.3</strong></span> El fichero <a href="datos/vinos.csv"><code>vinos.csv</code></a> contiene información sobre las características de una muestra de vinos portugueses de la denominación “Vinho Verde”. Las variables que contiene son:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 52%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Descripción</th>
<th>Tipo (unidades)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tipo</td>
<td>Tipo de vino</td>
<td>Categórica (blanco, tinto)</td>
</tr>
<tr class="even">
<td>meses.barrica</td>
<td>Mesesde envejecimiento en barrica</td>
<td>Numérica(meses)</td>
</tr>
<tr class="odd">
<td>acided.fija</td>
<td>Cantidadde ácidotartárico</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="even">
<td>acided.volatil</td>
<td>Cantidad de ácido acético</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="odd">
<td>acido.citrico</td>
<td>Cantidad de ácidocítrico</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="even">
<td>azucar.residual</td>
<td>Cantidad de azúcarremanente después de la fermentación</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="odd">
<td>cloruro.sodico</td>
<td>Cantidad de clorurosódico</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="even">
<td>dioxido.azufre.libre</td>
<td>Cantidad de dióxido de azufreen formalibre</td>
<td>Numérica(mg/dm3)</td>
</tr>
<tr class="odd">
<td>dioxido.azufre.total</td>
<td>Cantidadde dióxido de azufretotal en forma libre o ligada</td>
<td>Numérica(mg/dm3)</td>
</tr>
<tr class="even">
<td>densidad</td>
<td>Densidad</td>
<td>Numérica(g/cm3)</td>
</tr>
<tr class="odd">
<td>ph</td>
<td>pH</td>
<td>Numérica(0-14)</td>
</tr>
<tr class="even">
<td>sulfatos</td>
<td>Cantidadde sulfato de potasio</td>
<td>Numérica(g/dm3)</td>
</tr>
<tr class="odd">
<td>alcohol</td>
<td>Porcentajede contenidode alcohol</td>
<td>Numérica(0-100)</td>
</tr>
<tr class="even">
<td>calidad</td>
<td>Calificación otorgada porun panel de expertos</td>
<td>Numérica(0-10)</td>
</tr>
</tbody>
</table>
<ol type="a">
<li><p>Crear un data frame con los datos de los vinos a partir del fichero <a href="https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/vinos.csv"><code>vinos.csv</code></a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="bab66ac2" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span>, <span class="bu">DataFrames</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="fu">download</span>(<span class="st">"https://aprendeconalf.es/aprendizaje-automatico-practicas-julia/datos/vinos.csv"</span>), DataFrame)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<div><div style="float: left;"><span>5320×14 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">5295 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">tipo</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">meses_barrica</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">acided_fija</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">acided_volatil</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">acido_citrico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">azucar_residual</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">cloruro_sodico</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">dioxido_azufre_libre</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">dioxido_azufre_total</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">densidad</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ph</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sulfatos</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">alcohol</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">calidad</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="String7">String7</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Float64">Float64</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">20.7</td>
<td style="text-align: right;">0.045</td>
<td style="text-align: right;">45.0</td>
<td style="text-align: right;">170.0</td>
<td style="text-align: right;">1.001</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">8.8</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">0.3</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">1.6</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">132.0</td>
<td style="text-align: right;">0.994</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">9.5</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.1</td>
<td style="text-align: right;">0.28</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">97.0</td>
<td style="text-align: right;">0.9951</td>
<td style="text-align: right;">3.26</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">10.1</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.2</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">8.5</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">47.0</td>
<td style="text-align: right;">186.0</td>
<td style="text-align: right;">0.9956</td>
<td style="text-align: right;">3.19</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">9.9</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">0.045</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">136.0</td>
<td style="text-align: right;">0.9949</td>
<td style="text-align: right;">3.18</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">9.6</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.1</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">28.0</td>
<td style="text-align: right;">129.0</td>
<td style="text-align: right;">0.9938</td>
<td style="text-align: right;">3.22</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">11.0</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.1</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">1.45</td>
<td style="text-align: right;">0.033</td>
<td style="text-align: right;">11.0</td>
<td style="text-align: right;">63.0</td>
<td style="text-align: right;">0.9908</td>
<td style="text-align: right;">2.99</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">12.0</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.6</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">0.035</td>
<td style="text-align: right;">17.0</td>
<td style="text-align: right;">109.0</td>
<td style="text-align: right;">0.9947</td>
<td style="text-align: right;">3.14</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">9.7</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.9</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">0.37</td>
<td style="text-align: right;">1.2</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">75.0</td>
<td style="text-align: right;">0.992</td>
<td style="text-align: right;">3.18</td>
<td style="text-align: right;">0.63</td>
<td style="text-align: right;">10.8</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.6</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">48.0</td>
<td style="text-align: right;">143.0</td>
<td style="text-align: right;">0.9912</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">0.52</td>
<td style="text-align: right;">12.4</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.3</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">19.25</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">41.0</td>
<td style="text-align: right;">172.0</td>
<td style="text-align: right;">1.0002</td>
<td style="text-align: right;">2.98</td>
<td style="text-align: right;">0.67</td>
<td style="text-align: right;">9.7</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.6</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">28.0</td>
<td style="text-align: right;">112.0</td>
<td style="text-align: right;">0.9914</td>
<td style="text-align: right;">3.25</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">11.4</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">blanco</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">99.0</td>
<td style="text-align: right;">0.9928</td>
<td style="text-align: right;">3.24</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">9.6</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5309</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">7.5</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">2.4</td>
<td style="text-align: right;">0.065</td>
<td style="text-align: right;">34.0</td>
<td style="text-align: right;">60.0</td>
<td style="text-align: right;">0.99492</td>
<td style="text-align: right;">3.34</td>
<td style="text-align: right;">0.85</td>
<td style="text-align: right;">11.4</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5310</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">0.066</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">28.0</td>
<td style="text-align: right;">0.99483</td>
<td style="text-align: right;">3.55</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">10.9</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5311</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">7.2</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">0.068</td>
<td style="text-align: right;">34.0</td>
<td style="text-align: right;">102.0</td>
<td style="text-align: right;">0.99414</td>
<td style="text-align: right;">3.27</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: right;">12.8</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5312</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.6</td>
<td style="text-align: right;">0.725</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: right;">7.8</td>
<td style="text-align: right;">0.073</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">79.0</td>
<td style="text-align: right;">0.9977</td>
<td style="text-align: right;">3.29</td>
<td style="text-align: right;">0.54</td>
<td style="text-align: right;">9.2</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5313</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.15</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">0.077</td>
<td style="text-align: right;">26.0</td>
<td style="text-align: right;">35.0</td>
<td style="text-align: right;">0.99314</td>
<td style="text-align: right;">3.32</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">11.6</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5314</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.089</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">26.0</td>
<td style="text-align: right;">0.99402</td>
<td style="text-align: right;">3.67</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">11.6</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5315</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">2.3</td>
<td style="text-align: right;">0.076</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">0.99574</td>
<td style="text-align: right;">3.42</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">11.0</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5316</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.8</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">1.9</td>
<td style="text-align: right;">0.068</td>
<td style="text-align: right;">28.0</td>
<td style="text-align: right;">38.0</td>
<td style="text-align: right;">0.99651</td>
<td style="text-align: right;">3.42</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">9.5</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5317</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">6.2</td>
<td style="text-align: right;">0.6</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">32.0</td>
<td style="text-align: right;">44.0</td>
<td style="text-align: right;">0.9949</td>
<td style="text-align: right;">3.45</td>
<td style="text-align: right;">0.58</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5318</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">5.9</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.062</td>
<td style="text-align: right;">39.0</td>
<td style="text-align: right;">51.0</td>
<td style="text-align: right;">0.99512</td>
<td style="text-align: right;">3.52</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">11.2</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5319</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5.9</td>
<td style="text-align: right;">0.645</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">0.075</td>
<td style="text-align: right;">32.0</td>
<td style="text-align: right;">44.0</td>
<td style="text-align: right;">0.99547</td>
<td style="text-align: right;">3.57</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: right;">10.2</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5320</td>
<td style="text-align: left;">tinto</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.0</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">0.067</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">42.0</td>
<td style="text-align: right;">0.99549</td>
<td style="text-align: right;">3.39</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">11.0</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Mostrar los tipos de cada variable del data frame.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <code>schema</code> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="2bf7eb17" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">MLJ</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">schema</span>(df)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING: using MLJ.fit! in module Main conflicts with an existing identifier.
WARNING: using MLJ.predict in module Main conflicts with an existing identifier.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="67">
<div class="ansi-escaped-output">
<pre>┌──────────────────────┬────────────┬─────────┐
│ names                │ scitypes   │ types   │
├──────────────────────┼────────────┼─────────┤
│ tipo                 │ Textual    │ String7 │
│ meses_barrica        │ Count      │ Int64   │
│ acided_fija          │ Continuous │ Float64 │
│ acided_volatil       │ Continuous │ Float64 │
│ acido_citrico        │ Continuous │ Float64 │
│ azucar_residual      │ Continuous │ Float64 │
│ cloruro_sodico       │ Continuous │ Float64 │
│ dioxido_azufre_libre │ Continuous │ Float64 │
│ dioxido_azufre_total │ Continuous │ Float64 │
│ densidad             │ Continuous │ Float64 │
│ ph                   │ Continuous │ Float64 │
│ sulfatos             │ Continuous │ Float64 │
│ alcohol              │ Continuous │ Float64 │
│ calidad              │ Count      │ Int64   │
└──────────────────────┴────────────┴─────────┘
</pre>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Hacer un análisis de los datos perdidos en el data frame.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="ac63394e" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(df, <span class="op">:</span>nmissing)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<div><div style="float: left;"><span>14×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;">
<table class="data-frame caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;">Row</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nmissing</th>
</tr>
<tr class="subheader headerLastRow even">
<th class="rowNumber" data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold;"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Symbol">Symbol</th>
<th style="text-align: left;" data-quarto-table-cell-role="th" title="Int64">Int64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">1</td>
<td style="text-align: left;">tipo</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">2</td>
<td style="text-align: left;">meses_barrica</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">3</td>
<td style="text-align: left;">acided_fija</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">4</td>
<td style="text-align: left;">acided_volatil</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">5</td>
<td style="text-align: left;">acido_citrico</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">6</td>
<td style="text-align: left;">azucar_residual</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">7</td>
<td style="text-align: left;">cloruro_sodico</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">8</td>
<td style="text-align: left;">dioxido_azufre_libre</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">9</td>
<td style="text-align: left;">dioxido_azufre_total</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">10</td>
<td style="text-align: left;">densidad</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">11</td>
<td style="text-align: left;">ph</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">12</td>
<td style="text-align: left;">sulfatos</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td class="rowNumber" style="text-align: right; font-weight: bold;">13</td>
<td style="text-align: left;">alcohol</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td class="rowNumber" style="text-align: right; font-weight: bold;">14</td>
<td style="text-align: left;">calidad</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Se considera que un vino es bueno si tiene una puntuación de calidad mayor que <span class="math inline">\(6.5\)</span>. Recodificar la variable <code>calidad</code> en una variable categórica que tome el valor 1 si la calidad es mayor que <span class="math inline">\(6.5\)</span> y 0 en caso contrario.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="cfd1633b" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CategoricalArrays</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Recodificamos la variable calidad.</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>df.calidad <span class="op">=</span> <span class="fu">cut</span>(df.calidad, [<span class="fl">0</span>, <span class="fl">6.5</span>, <span class="fl">10</span>], labels <span class="op">=</span> [<span class="st">" ☹️ "</span>, <span class="st">" 😊 "</span>])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>5320-element CategoricalArray{String,1,UInt32}:
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " 😊 "
 " ☹️ "
 " 😊 "
 " ☹️ "
 ⋮
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Dividir el data frame en un data frame con las variables predictivas y un vector con la variable objetivo <code>bueno</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-29-contents" aria-controls="callout-29" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-29" class="callout-29-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <a href="https://juliaai.github.io/MLJ.jl/stable/preparing_data/#MLJBase.unpack"><code>unpack</code></a> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a> para dividir el data frame en dos partes, una con las columnas de entrada del modelo y otra con la columna de salida.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="81354167" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>y, X <span class="op">=</span> <span class="fu">unpack</span>(df, <span class="op">==</span>(<span class="op">:</span>calidad), rng <span class="op">=</span> <span class="fl">123</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<div class="ansi-escaped-output">
<pre>(CategoricalValue{String, UInt32}[" ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " 😊 ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ "  …  " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ ", " ☹️ "], <span class="ansi-bold">5320×13 DataFrame</span>
<span class="ansi-bold">  Row </span>│<span class="ansi-bold"> tipo    </span><span class="ansi-bold"> meses_barrica </span><span class="ansi-bold"> acided_fija </span><span class="ansi-bold"> acided_volatil </span><span class="ansi-bold"> acido_citrico </span><span class="ansi-bold"> az</span> ⋯
      │<span class="ansi-bright-black-fg"> String7 </span><span class="ansi-bright-black-fg"> Int64         </span><span class="ansi-bright-black-fg"> Float64     </span><span class="ansi-bright-black-fg"> Float64        </span><span class="ansi-bright-black-fg"> Float64       </span><span class="ansi-bright-black-fg"> Fl</span> ⋯
──────┼─────────────────────────────────────────────────────────────────────────
    1 │ blanco               0          6.7           0.5             0.36     ⋯
    2 │ blanco               0          6.3           0.2             0.3
    3 │ blanco               0          6.2           0.35            0.03
    4 │ tinto                3          8.0           0.39            0.3
    5 │ blanco               0          7.9           0.255           0.26     ⋯
    6 │ blanco               0          6.1           0.31            0.37
    7 │ blanco               0          6.8           0.28            0.36
    8 │ blanco               0          8.2           0.34            0.49
    9 │ tinto                0          6.7           0.48            0.02     ⋯
   10 │ blanco               0          7.4           0.35            0.2
   11 │ tinto                5          7.5           0.53            0.06
  ⋮   │    ⋮           ⋮             ⋮             ⋮               ⋮           ⋱
 5311 │ blanco               0          7.2           0.14            0.35
 5312 │ tinto                3          7.6           0.41            0.24     ⋯
 5313 │ tinto                0          7.3           0.4             0.3
 5314 │ tinto                4          7.1           0.48            0.28
 5315 │ blanco               0          6.4           0.29            0.2
 5316 │ blanco               0          9.4           0.24            0.29     ⋯
 5317 │ blanco               0          6.3           0.25            0.27
 5318 │ blanco               0          5.5           0.16            0.26
 5319 │ blanco               0          7.4           0.36            0.32
 5320 │ blanco               0          7.6           0.51            0.24     ⋯
<span class="ansi-cyan-fg">                                                 8 columns and 5299 rows omitted</span>)</pre>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Para poder entrenar un modelo de un arbol de decisión, las variables predictivas deben ser cuantitativas. Transmformar las variables categóricas en variables numéricas.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <a href="https://juliaai.github.io/MLJ.jl/stable/preparing_data/#MLJBase.coerce!"><code>coerce!</code></a> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a> para transformar las variables categóricas en variables numéricas.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-32-contents" aria-controls="callout-32" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-32" class="callout-32-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="fd5638af" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir las variables categóricas a enteros.</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coerce!</span>(X, <span class="op">:</span>tipo <span class="op">=&gt;</span> OrderedFactor, <span class="op">:</span>meses_barrica <span class="op">=&gt;</span> Continuous)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">schema</span>(X)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<div class="ansi-escaped-output">
<pre>┌──────────────────────┬──────────────────┬───────────────────────────────────┐
│ names                │ scitypes         │ types                             │
├──────────────────────┼──────────────────┼───────────────────────────────────┤
│ tipo                 │ OrderedFactor{2} │ CategoricalValue{String7, UInt32} │
│ meses_barrica        │ Continuous       │ Float64                           │
│ acided_fija          │ Continuous       │ Float64                           │
│ acided_volatil       │ Continuous       │ Float64                           │
│ acido_citrico        │ Continuous       │ Float64                           │
│ azucar_residual      │ Continuous       │ Float64                           │
│ cloruro_sodico       │ Continuous       │ Float64                           │
│ dioxido_azufre_libre │ Continuous       │ Float64                           │
│ dioxido_azufre_total │ Continuous       │ Float64                           │
│ densidad             │ Continuous       │ Float64                           │
│ ph                   │ Continuous       │ Float64                           │
│ sulfatos             │ Continuous       │ Float64                           │
│ alcohol              │ Continuous       │ Float64                           │
└──────────────────────┴──────────────────┴───────────────────────────────────┘
</pre>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Definir un modelo de árbol de decisión con profundidad máxima 3.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-33-contents" aria-controls="callout-33" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-33" class="callout-33-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Cargar el modelo <code>DecisionTreeClassifier</code> del paquete <a href="https://docs.juliahub.com/DecisionTree/"><code>DecisionTree</code></a> con la macros <code>@iload</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-34-contents" aria-controls="callout-34" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-34" class="callout-34-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="93f0ae2d" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos el tipo de modelo.</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>Tree <span class="op">=</span> <span class="pp">@iload</span> DecisionTreeClassifier pkg <span class="op">=</span> <span class="st">"DecisionTree"</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Instanciamos el modelo con sus parámetros.</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>arbol <span class="op">=</span> <span class="fu">Tree</span>(max_depth <span class="op">=</span><span class="fl">3</span>, rng <span class="op">=</span> <span class="fl">123</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>import MLJDecisionTreeInterface ✔</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>[ Info: For silent loading, specify `verbosity=0`. </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>DecisionTreeClassifier(
  max_depth = 3, 
  min_samples_leaf = 1, 
  min_samples_split = 2, 
  min_purity_increase = 0.0, 
  n_subfeatures = 0, 
  post_prune = false, 
  merge_purity_threshold = 1.0, 
  display_depth = 5, 
  feature_importance = :impurity, 
  rng = 123)</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Evaluar el modelo tomando un 70% de ejemplos en el conjunto de entrenamiento y un 30% en el conjunto de test. Utilizar como métrica la precisión.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-35-contents" aria-controls="callout-35" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-35" class="callout-35-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <a href="https://juliaai.github.io/MLJ.jl/stable/evaluating_model_performance/#MLJBase.evaluate!"><code>evaluate</code></a> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a> para evaluar el modelo. Los parámetros más importantes de esta función son:</p>
<ul>
<li><code>resampling</code>: Indica el método de muestreo para definir los conjuntos de entrenamiento y test. Los métodos más habituales son:
<ul>
<li><code>Holdout(fraction_train = p)</code>: Divide el conjunto de datos tomando una proporción de <span class="math inline">\(p\)</span> ejemplos en el conjunto de entrenamiento y <span class="math inline">\(1-p\)</span> en el conjunto de test.</li>
<li><code>CV(nfolds = n, shuffle = true|false)</code>: Utiliza validación cruzada con <code>n</code> iteraciones. Si se indica <code>shuffle = true</code>, se utiliza validación cruzada aleatoria.</li>
<li><code>StratifiedCV(nfolds = n, shuffle = true|false)</code>: Utiliza validación cruzada estratificada con <code>n</code> iteraciones. Si se indica <code>shuffle = true</code>, se utiliza validación cruzada estratificada aleatoria.</li>
<li><code>InSample()</code>: Utiliza el conjunto de entrenamiento como conjunto de test.</li>
</ul></li>
<li><code>measures</code>: Indica las métricas a utilizar para evaluar el modelo. Las métricas más habituales son:
<ul>
<li><code>cross_entropy</code>: Pérdida de entropía cruzada.</li>
<li><code>confusion_matrix</code>: Matriz de confusión.</li>
<li><code>true_positive_rate</code>: Tasa de verdaderos positivos.</li>
<li><code>true_negative_rate</code>: Tasa de verdaderos negativos.</li>
<li><code>ppv</code>: Valor predictivo positivo.</li>
<li><code>npv</code>: Valor predictivo negativo.</li>
<li><code>accuracy</code>: Precisión.</li>
</ul>
Se puede indicar más de una en un vector.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-36-contents" aria-controls="callout-36" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-36" class="callout-36-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="55c7235f" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">evaluate</span>(arbol, X, y, resampling <span class="op">=</span> <span class="fu">Holdout</span>(fraction_train <span class="op">=</span> <span class="fl">0.7</span>, rng <span class="op">=</span> <span class="fl">123</span>), measures <span class="op">=</span> accuracy)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<div class="ansi-escaped-output">
<pre>PerformanceEvaluation object with these fields:
  model, measure, operation,
  measurement, per_fold, per_observation,
  fitted_params_per_fold, report_per_fold,
  train_test_rows, resampling, repeats
Extract:
┌────────────┬──────────────┬─────────────┐
│ measure    │ operation    │ measurement │
├────────────┼──────────────┼─────────────┤
│ Accuracy() │ predict_mode │ 0.843       │
└────────────┴──────────────┴─────────────┘
</pre>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Evaluar el modelo mediante validación cruzada estratificada usando las métricas de la pérdida de entropía cruzada, la matriz de confusión, la tasa de verdaderos positivos, la tasa de verdaderos negativos, el valor predictivo positivo, el valor predictivo negativo y la precisión. ¿Es un buen modelo?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-37-contents" aria-controls="callout-37" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-37" class="callout-37-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="5ca295a2" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">evaluate</span>(arbol, X, y, resampling <span class="op">=</span> <span class="fu">StratifiedCV</span>(rng <span class="op">=</span> <span class="fl">123</span>), measures <span class="op">=</span> [cross_entropy, confusion_matrix, true_positive_rate, true_negative_rate, ppv, npv, accuracy])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Evaluating over 6 folds:  33%[========&gt;                ]  ETA: 0:00:02Evaluating over 6 folds: 100%[=========================] Time: 0:00:01</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="74">
<div class="ansi-escaped-output">
<pre>PerformanceEvaluation object with these fields:
  model, measure, operation,
  measurement, per_fold, per_observation,
  fitted_params_per_fold, report_per_fold,
  train_test_rows, resampling, repeats
Extract:
┌───┬──────────────────────────┬──────────────┬─────────────────────────────────
│   │ measure                  │ operation    │ measurement                    ⋯
├───┼──────────────────────────┼──────────────┼─────────────────────────────────
│ A │ LogLoss(                 │ predict      │ 0.375                          ⋯
│   │   tol = 2.22045e-16)     │              │                                ⋯
│ B │ ConfusionMatrix(         │ predict_mode │ ConfusionMatrix{2}([3821534 78 ⋯
│   │   levels = nothing,      │              │                                ⋯
│   │   perm = nothing,        │              │                                ⋯
│   │   rev = nothing,         │              │                                ⋯
│   │   checks = true)         │              │                                ⋯
│ C │ TruePositiveRate(        │ predict_mode │ 0.128                          ⋯
│   │   levels = nothing,      │              │                                ⋯
│   │   rev = nothing,         │              │                                ⋯
│   │   checks = true)         │              │                                ⋯
│ D │ TrueNegativeRate(        │ predict_mode │ 1.0                            ⋯
│   │   levels = nothing,      │              │                                ⋯
│   │   rev = nothing,         │              │                                ⋯
│   │   checks = true)         │              │                                ⋯
│ E │ PositivePredictiveValue( │ predict_mode │ 0.994                          ⋯
│   │   levels = nothing,      │              │                                ⋯
│   │   rev = nothing,         │              │                                ⋯
│   │   checks = true)         │              │                                ⋯
│ F │ NegativePredictiveValue( │ predict_mode │ 0.83                           ⋯
│   │   levels = nothing,      │              │                                ⋯
│   │   rev = nothing,         │              │                                ⋯
│ ⋮ │            ⋮             │      ⋮       │                        ⋮       ⋱
└───┴──────────────────────────┴──────────────┴─────────────────────────────────
<span class="ansi-cyan-fg">                                                     1 column and 2 rows omitted</span>
┌───┬───────────────────────────────────────────────────────────────────────────
│   │ per_fold                                                                 ⋯
├───┼───────────────────────────────────────────────────────────────────────────
│ A │ [0.391, 0.394, 0.35, 0.358, 0.365, 0.391]                                ⋯
│ B │ ConfusionMatrix{2, true, CategoricalValue{String, UInt32}}[ConfusionMatr ⋯
│ C │ [0.125, 0.167, 0.155, 0.112, 0.113, 0.0952]                              ⋯
│ D │ [1.0, 0.999, 1.0, 1.0, 1.0, 1.0]                                         ⋯
│ E │ [1.0, 0.966, 1.0, 1.0, 1.0, 1.0]                                         ⋯
│ F │ [0.83, 0.837, 0.835, 0.827, 0.828, 0.825]                                ⋯
│ G │ [0.834, 0.841, 0.84, 0.831, 0.832, 0.828]                                ⋯
└───┴───────────────────────────────────────────────────────────────────────────
<span class="ansi-cyan-fg">                                                               2 columns omitted</span>
</pre>
</div>
</div>
</div>
<p>La precisión del modelo es de <span class="math inline">\(0.834\)</span> que no está mal, pero si consdieramos la tasa de verdadero positivos, que es <span class="math inline">\(0.13\)</span> y la tasa de verdaderos negativos, que es prácticamente 1, el modelo tiene un buen rendimiento en la clasificación de los vinos malos, pero un mal rendimiento en la clasificación de los vinos buenos. Por lo tanto, no podemos decir que sea un buen modelo.</p>
</div>
</div>
</div></li>
<li><p>Construir árboles de decisión con profundidades máximas de 2 a 10 y evaluar el modelo con validación cruzada estratificada. ¿Cuál es la profundidad máxima que da mejor resultado?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-38-contents" aria-controls="callout-38" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-38" class="callout-38-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <a href="https://juliaai.github.io/MLJ.jl/stable/tuning_models/#MLJTuning.TunedModel"><code>TunedModel</code></a> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a> para ajustar los parámetros del modelo.</p>
Los parámetros más importantes de esta función son:
<ul>
<li><code>model</code>: Indica el modelo a ajustar.</li>
<li><code>resampling</code>: Indica el método de muestreo para definir los conjuntos de entrenamiento y test.</li>
<li><code>tuning</code>: Indica el método de ajuste de los parámetros del modelo. Los métodos más habituales son:
<ul>
<li><code>Grid(resolution = n)</code>: Ajusta los parámetros del modelo utilizando una cuadrícula de búsqueda con <code>n</code> valores.</li>
<li><code>RandomSearch(resolution = n)</code>: Ajusta los parámetros del modelo utilizando una búsqueda aleatoria con <code>n</code> valores.</li>
</ul></li>
<li>range: Indica el rango de valores a utilizar para ajustar los parámetros del modelo. Se puede indicar un rango de valores o un vector de valores.</li>
<li><code>measure</code>: Indica la métrica a utilizar para evaluar el modelo.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-39-contents" aria-controls="callout-39" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-39" class="callout-39-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="18d95e86" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instanciamos el modelo de árbol de decisión.</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>arbol <span class="op">=</span> <span class="fu">Tree</span>()</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos el rango de valores a utilizar para ajustar los parámetros del modelo.</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fu">range</span>(arbol, <span class="op">:</span>max_depth, lower<span class="op">=</span><span class="fl">2</span>, upper<span class="op">=</span><span class="fl">10</span>)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustamos los parámetros del modelo utilizando una cuadrícula de búsqueda con 9 valores.</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>arbol_parametrizado <span class="op">=</span> <span class="fu">TunedModel</span>(</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> arbol,</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    resampling <span class="op">=</span> <span class="fu">StratifiedCV</span>(rng <span class="op">=</span> <span class="fl">123</span>),</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    tuning <span class="op">=</span> <span class="fu">Grid</span>(resolution <span class="op">=</span> <span class="fl">9</span>),</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    range <span class="op">=</span> r,</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    measure <span class="op">=</span> accuracy)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una máquina de aprendizaje con el modelo, las variables predictivas y la variable objetivo.</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>mach <span class="op">=</span> <span class="fu">machine</span>(arbol_parametrizado, X, y)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustamos los parámetros del modelo.</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>MLJ.<span class="fu">fit!</span>(mach)</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostramos los parámetros del mejor modelo.</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="fu">fitted_params</span>(mach).best_model</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>[ Info: Training machine(ProbabilisticTunedModel(model = DecisionTreeClassifier(max_depth = -1, …), …), …).
[ Info: Attempting to evaluate 9 models.
Evaluating over 9 metamodels:   0%[&gt;                        ]  ETA: N/AEvaluating over 9 metamodels:  11%[==&gt;                      ]  ETA: 0:00:03Evaluating over 9 metamodels:  22%[=====&gt;                   ]  ETA: 0:00:03Evaluating over 9 metamodels:  33%[========&gt;                ]  ETA: 0:00:02Evaluating over 9 metamodels:  44%[===========&gt;             ]  ETA: 0:00:01Evaluating over 9 metamodels:  56%[=============&gt;           ]  ETA: 0:00:01Evaluating over 9 metamodels:  67%[================&gt;        ]  ETA: 0:00:01Evaluating over 9 metamodels:  78%[===================&gt;     ]  ETA: 0:00:01Evaluating over 9 metamodels:  89%[======================&gt;  ]  ETA: 0:00:00Evaluating over 9 metamodels: 100%[=========================] Time: 0:00:02</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>DecisionTreeClassifier(
  max_depth = 5, 
  min_samples_leaf = 1, 
  min_samples_split = 2, 
  min_purity_increase = 0.0, 
  n_subfeatures = 0, 
  post_prune = false, 
  merge_purity_threshold = 1.0, 
  display_depth = 5, 
  feature_importance = :impurity, 
  rng = TaskLocalRNG())</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Dibujar la curva de aprendizaje del modelo en función de la profundidad del árbol de decisión.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-40-contents" aria-controls="callout-40" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-40" class="callout-40-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
Usar la función <a href="https://juliaai.github.io/MLJ.jl/stable/learning_curves/#MLJBase.learning_curve"><code>learning_curve</code></a> del paquete <a href="https://juliaai.github.io/MLJ.jl/"><code>MLJ</code></a> para dibujar la curva de aprendizaje. Los parámetros más importantes de esta función son:
<ul>
<li><code>mach</code>: Indica la máquina de aprendizaje a utilizar.</li>
<li><code>range</code>: Indica el rango de valores a utilizar para ajustar los parámetros del modelo.</li>
<li><code>resampling</code>: Indica el método de muestreo para definir los conjuntos de entrenamiento y test.</li>
<li><code>measure</code>: Indica la métrica a utilizar para evaluar el modelo.</li>
<li><code>rngs</code>: Indica la semilla para la generación de números aleatorios. Se pueden indicar varias semillas en un vector y se genera una curva de aprendizaje para cada semilla.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-41-contents" aria-controls="callout-41" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-41" class="callout-41-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="68b20c1b" class="cell" data-execution_count="35">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instanciamos el modelo de árbol de decisión.</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>arbol <span class="op">=</span> <span class="fu">Tree</span>()</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una máquina de aprendizaje con el modelo, las variables predictivas y la variable objetivo.</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>mach <span class="op">=</span> <span class="fu">machine</span>(arbol, X, y)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos el rango de valores a utilizar para ajustar los parámetros del modelo.</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fu">range</span>(arbol, <span class="op">:</span>max_depth, lower<span class="op">=</span><span class="fl">2</span>, upper<span class="op">=</span><span class="fl">10</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Dibujamos la curva de aprendizaje.</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>curva <span class="op">=</span> <span class="fu">learning_curve</span>(mach, range <span class="op">=</span> r, resampling <span class="op">=</span> <span class="fu">StratifiedCV</span>(rng <span class="op">=</span> <span class="fl">123</span>), measure <span class="op">=</span> accuracy)</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Dibujamos la curva de aprendizaje.</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> <span class="fu">Figure</span>()</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> <span class="fu">Axis</span>(fig[<span class="fl">1</span>, <span class="fl">1</span>], title <span class="op">=</span> <span class="st">"Curva de aprendizaje"</span>, xlabel <span class="op">=</span> <span class="st">"Profundidad del árbol"</span>, ylabel <span class="op">=</span> <span class="st">"Precisión"</span>)</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>Makie.<span class="fu">scatter!</span>(ax, curva.parameter_values, curva.measurements)</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>[ Info: Training machine(ProbabilisticTunedModel(model = DecisionTreeClassifier(max_depth = -1, …), …), …).
[ Info: Attempting to evaluate 9 models.
Evaluating over 9 metamodels:  22%[=====&gt;                   ]  ETA: 0:00:01Evaluating over 9 metamodels:  33%[========&gt;                ]  ETA: 0:00:01Evaluating over 9 metamodels:  44%[===========&gt;             ]  ETA: 0:00:01Evaluating over 9 metamodels:  56%[=============&gt;           ]  ETA: 0:00:01Evaluating over 9 metamodels:  67%[================&gt;        ]  ETA: 0:00:01Evaluating over 9 metamodels:  78%[===================&gt;     ]  ETA: 0:00:00Evaluating over 9 metamodels:  89%[======================&gt;  ]  ETA: 0:00:00Evaluating over 9 metamodels: 100%[=========================] Time: 0:00:01
┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/ux0Te/src/scenes.jl:238</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="76">
<div>
<figure class="figure">
<p><img src="07-arboles-decision_files/figure-html/cell-35-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Construir un árbol de decisión con la profundidad máxima que da mejor resultado y visualizarlo.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-42-contents" aria-controls="callout-42" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-42" class="callout-42-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="0ccd7c22" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instanciamos el modelo de árbol de decisión.</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>arbol <span class="op">=</span> <span class="fu">Tree</span>(max_depth <span class="op">=</span> <span class="fl">4</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos una máquina de aprendizaje con el modelo, las variables predictivas y la variable objetivo.</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>mach <span class="op">=</span> <span class="fu">machine</span>(arbol, X, y)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustamos los parámetros del modelo.</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>MLJ.<span class="fu">fit!</span>(mach)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizamos el árbol de decisión.</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fitted_params</span>(mach).tree</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>[ Info: Training machine(DecisionTreeClassifier(max_depth = 4, …), …).</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>alcohol &lt; 10.62
├─ meses_barrica &lt; 8.5
│  ├─ acided_volatil &lt; 0.3125
│  │  ├─ acided_volatil &lt; 0.2025
│  │  │  ├─  ☹️  (408/496)
│  │  │  └─  ☹️  (1095/1172)
│  │  └─ meses_barrica &lt; 5.5
│  │     ├─  ☹️  (1334/1345)
│  │     └─  ☹️  (51/58)
│  └─  😊  (25/25)
└─ meses_barrica &lt; 12.5
   ├─ cloruro_sodico &lt; 0.0455
   │  ├─ alcohol &lt; 12.55
   │  │  ├─  ☹️  (751/1160)
   │  │  └─  😊  (185/286)
   │  └─ meses_barrica &lt; 10.5
   │     ├─  ☹️  (552/629)
   │     └─  😊  (25/43)
   └─ alcohol &lt; 14.45
      ├─  😊  (105/105)
      └─  ☹️  (1/1)</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>¿Cuál es la importancia de cada variable en el modelo?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-43-contents" aria-controls="callout-43" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-43" class="callout-43-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <code>feature_importances</code> del paquete <a href="https://juliaai.github.io/DecisionTree.jl/"><code>DecisionTree</code></a> para calcular la importancia de cada variable.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-44-contents" aria-controls="callout-44" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-44" class="callout-44-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div id="005db4f4" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la importancia de cada variable.</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">feature_importances</span>(mach)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>13-element Vector{Pair{Symbol, Float64}}:
              :alcohol =&gt; 0.5303315899204789
        :meses_barrica =&gt; 0.26854115615561525
       :acided_volatil =&gt; 0.1040970236546446
       :cloruro_sodico =&gt; 0.09703023026926123
                 :tipo =&gt; 0.0
          :acided_fija =&gt; 0.0
        :acido_citrico =&gt; 0.0
      :azucar_residual =&gt; 0.0
 :dioxido_azufre_libre =&gt; 0.0
 :dioxido_azufre_total =&gt; 0.0
             :densidad =&gt; 0.0
                   :ph =&gt; 0.0
             :sulfatos =&gt; 0.0</code></pre>
</div>
</div>
</div>
</div>
</div></li>
<li><p>Predecir la calidad de los 10 primeros vinos del conjunto de ejemplos.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-45-contents" aria-controls="callout-45" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Nota</span>Ayuda
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-45" class="callout-45-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Usar la función <code>predict</code> del paquete <a href="https://juliaai.github.io/DecisionTree.jl/"><code>DecisionTree</code></a> para predecir las probabilidades de pertenecer a cada clase un ejemplo o conjunto de ejemplos.</p>
<p>Usar la función <code>predict_mode</code> del paquete <a href="https://juliaai.github.io/DecisionTree.jl/"><code>DecisionTree</code></a> para predecir la clase de un ejemplo o conjunto de ejemplos.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-46-contents" aria-controls="callout-46" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-46" class="callout-46-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Primero calculamos las probabilidades de cada clase.</p>
<div id="de5ff827" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>MLJ.<span class="fu">predict</span>(mach, X[<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">:</span>])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>10-element CategoricalDistributions.UnivariateFiniteVector{OrderedFactor{2}, String, UInt32, Float64}:
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.992,  😊 =&gt;0.00818)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.823,  😊 =&gt;0.177)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.992,  😊 =&gt;0.00818)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.992,  😊 =&gt;0.00818)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.647,  😊 =&gt;0.353)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.647,  😊 =&gt;0.353)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.647,  😊 =&gt;0.353)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.878,  😊 =&gt;0.122)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.992,  😊 =&gt;0.00818)
 UnivariateFinite{OrderedFactor{2}}( ☹️ =&gt;0.992,  😊 =&gt;0.00818)</code></pre>
</div>
</div>
<p>Y ahora predecimos la clase.</p>
<div id="9bee1d8a" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict_mode</span>(mach, X[<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">:</span>])</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>10-element CategoricalArray{String,1,UInt32}:
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "
 " ☹️ "</code></pre>
</div>
</div>
</div>
</div>
</div></li>
</ol>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiado");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiado");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03-regresion.html" class="pagination-link" aria-label="Regresión">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Regresión</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-redes-neuronales-prealimentadas.html" class="pagination-link" aria-label="Redes de neuronas artificiales">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Redes de neuronas artificiales</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>